<!DOCTYPE html>
<html dir="ltr" lang="en-US"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/css.css" media="screen, projection">
<title>How to Use C Mutex Lock Examples for Linux Thread Synchronization</title>
<meta name="description" content="In the Linux threads series, we discussed on the ways in which a thread can terminate and how the return status is passed on from the terminating thread to">
<meta name="robots" content="noodp, noydir">
<link rel="canonical" href="http://www.thegeekstuff.com/2012/05/c-mutex-examples/">
<link rel="alternate" type="application/rss+xml" title="The Geek Stuff feed" href="http://www.thegeekstuff.com/feed/">
<link rel="pingback" href="http://www.thegeekstuff.com/xmlrpc.php">

<!-- All in One SEO Pack 2.2.6.2 by Michael Torbert of Semper Fi Web Design[295,367] -->
<meta name="description" content="In the Linux threads series, we discussed on the ways in which a thread can terminate and how the return status is passed on from the terminating thread to its">

<link rel="canonical" href="http://www.thegeekstuff.com/2012/05/c-mutex-examples/">
<!-- /all in one seo pack -->
<link rel="dns-prefetch" href="http://s.w.org/">
<link rel="alternate" type="application/rss+xml" title="The Geek Stuff ¬ª How to Use C Mutex Lock Examples for Linux Thread Synchronization Comments Feed" href="http://www.thegeekstuff.com/2012/05/c-mutex-examples/feed/">
<link rel="https://api.w.org/" href="http://www.thegeekstuff.com/wp-json/">
<link rel="alternate" type="application/json+oembed" href="http://www.thegeekstuff.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.thegeekstuff.com%2F2012%2F05%2Fc-mutex-examples%2F">
<link rel="alternate" type="text/xml+oembed" href="http://www.thegeekstuff.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.thegeekstuff.com%2F2012%2F05%2Fc-mutex-examples%2F&amp;format=xml">
<link rel="shortcut icon" href="http://static.thegeekstuff.com/wp-content/uploads/2015/05/favicon.ico.gzip">
<link rel="preload" href="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/integrator_002.js"><script src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/cbgapi.loaded_1" async=""></script><script src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/cbgapi.loaded_0" async=""></script><script src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/ca-pub-8090601437064582.js"></script><script type="text/javascript" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/integrator_002.js"></script><link rel="preload" href="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/integrator.js"><script type="text/javascript" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/integrator.js"></script><link rel="prefetch" href="https://securepubads.g.doubleclick.net/static/3p_cookie.html"><script type="text/javascript" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/a_002"></script><script type="text/javascript" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/inputtools.js"></script><script type="text/javascript" charset="utf-8" async="" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/button.js"></script></head>
<body class="template-single">
<script type="text/javascript" async="" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/ga.js"></script><script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-5302569-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
<div class="container">
	<div id="header" class="header">
		<p id="logo"><a href="http://www.thegeekstuff.com/"><img src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/thegeekstuff.gif" alt="The Geek Stuff"></a>
</p><div id="header_ad"><div id="header_ad1">
<script async="" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/adsbygoogle.js"></script>
<!-- TGS Logo Header -->
<ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-8090601437064582" data-ad-slot="4708993701" data-adsbygoogle-status="done"><ins id="aswift_0_expand" style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent;"><ins id="aswift_0_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;width:728px;height:90px;" width="728" height="90" frameborder="0"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div></div>
	</div>
	<span class="menu_control">‚â° Menu</span>
<ul id="menu-tgs-menu" class="menu"><li id="menu-item-15798" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-15798"><a href="http://www.thegeekstuff.com/">Home</a></li>
<li id="menu-item-15797" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15797"><a href="http://www.thegeekstuff.com/linux-101-hacks-ebook/">Free eBook</a></li>
<li id="menu-item-15805" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15805"><a href="http://www.thegeekstuff.com/best-of-the-blog/">Start Here</a></li>
<li id="menu-item-15800" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15800"><a href="http://www.thegeekstuff.com/contact/">Contact</a></li>
<li id="menu-item-15802" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15802"><a href="http://www.thegeekstuff.com/about/">About</a></li>
</ul>
	<div class="columns">
		<div class="content">
			<div id="post-10272" class="post_box grt top" itemscope="" itemtype="http://schema.org/Article">
				<div class="headline_area">
					<h1 class="headline" itemprop="name">How to Use C Mutex Lock Examples for Linux Thread Synchronization</h1>
					<div class="byline small">
						<span class="post_author_intro">by</span> <span class="post_author" itemprop="author">Himanshu Arora</span>
						<meta itemprop="datePublished" content="2012-05-03">
						<meta itemprop="dateModified" content="2012-04-27">
						<span class="post_date_intro">on</span> <span class="post_date" title="2012-05-03">May 3, 2012</span>
					</div>
				</div>
				<div class="post_content" itemprop="articleBody">
<div style="margin:7px 0px 6px 0px; padding:5px;">

<div style="float:left; width=95px">
<div style="text-indent: 0px; margin: 0px; padding: 0px; background: transparent none repeat scroll 0% 0%; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 32px; height: 20px;" id="___plusone_0"><iframe ng-non-bindable="" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 32px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" tabindex="0" vspace="0" id="I6_1509863021618" name="I6_1509863021618" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/fastbutton.html" data-gapiattached="true" title="G+" width="100%" frameborder="0"></iframe></div>
</div>

<div style="float:left; padding:2px; width:90px"><iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.thegeekstuff.com%2F2012%2F05%2Fc-mutex-examples%2F&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" style="border:none; overflow:hidden; width:450px; height:21px;" allowtransparency="true" frameborder="0"></iframe>
</div>

<div style="width=95px">
<iframe id="twitter-widget-0" scrolling="no" allowtransparency="true" class="twitter-share-button twitter-share-button-rendered twitter-tweet-button" style="position: static; visibility: visible; width: 60px; height: 20px;" title="Twitter Tweet Button" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/tweet_button.html" frameborder="0"></iframe><script type="text/javascript" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/widgets.js"></script>
</div>

</div>
<p>In the Linux threads series, we discussed on the ways in which a 
thread can terminate and how the return status is passed on from the 
terminating thread to its parent thread. In this article we will throw 
some light on an important aspect known as thread synchronization.<br>
<span id="more-10272"></span><br>
Linux Threads Series: <a href="http://www.thegeekstuff.com/2012/03/linux-threads-intro/">part 1</a>, <a href="http://www.thegeekstuff.com/2012/04/create-threads-in-linux/">part 2</a>, <a href="http://www.thegeekstuff.com/2012/04/terminate-c-thread/">part 3</a>, part 4 (this article).</p>
<h3>Thread Synchronization Problems</h3>
<p>Lets take an example code to study synchronization problems :</p>
<pre>#include&lt;stdio.h&gt;
#include&lt;string.h&gt;
#include&lt;pthread.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;unistd.h&gt;

pthread_t tid[2];
int counter;

void* doSomeThing(void *arg)
{
    unsigned long i = 0;
    counter += 1;
    printf("\n Job %d started\n", counter);

    for(i=0; i&lt;(0xFFFFFFFF);i++);
    printf("\n Job %d finished\n", counter);

    return NULL;
}

int main(void)
{
    int i = 0;
    int err;

    while(i &lt; 2)
    {
        err = pthread_create(&amp;(tid[i]), NULL, &amp;doSomeThing, NULL);
        if (err != 0)
            printf("\ncan't create thread :[%s]", strerror(err));
        i++;
    }

    pthread_join(tid[0], NULL);
    pthread_join(tid[1], NULL);

    return 0;
}</pre>
<p>The above code is a simple one in which two threads(jobs) are created
 and in the start function of these threads, a counter is maintained 
through which user gets the logs about job number which is started and 
when it is completed. The code and the flow looks fine but when we see 
the output :</p>
<pre>$ ./tgsthreads
Job 1 started
Job 2 started
Job 2 finished
Job 2 finished</pre>
<p>If you focus on the last two logs, you will see that the log ‚ÄòJob 2 
finished‚Äô is repeated twice while no log for ‚ÄòJob 1 finished‚Äô is seen.</p>
<p>Now, if you go back at the code and try to find any logical flaw, 
you‚Äôll probably not find any flaw easily. But if you‚Äôll have a closer 
look and visualize&nbsp; the execution of the code, you‚Äôll find that :</p>
<ul>
<li>The log ‚ÄòJob 2 started‚Äô is printed just after ‚ÄòJob 1 Started‚Äô&nbsp; 
so it can easily be concluded that while thread 1 was processing the 
scheduler scheduled the thread 2.</li>
<li>If the above assumption was true then the value of the ‚Äòcounter‚Äô variable got incremented again before job 1 got finished.</li>
<li>So, when Job 1 actually got finished, then the wrong value of 
counter produced the log ‚ÄòJob 2 finished‚Äô followed by the ‚ÄòJob 2 
finished‚Äô&nbsp; for the actual job 2 or vice versa as it is dependent on
 scheduler.</li>
<li>So we see that its not the repetitive log but the wrong value of the ‚Äòcounter‚Äô variable that is the problem.</li>
</ul>
<p>The actual problem was the usage of the variable ‚Äòcounter‚Äô by second 
thread when the first thread was using or about to use it. In other 
words we can say that lack of synchronization between the threads while 
using the shared resource ‚Äòcounter‚Äô caused the problems or in one word 
we can say that this problem happened due to ‚ÄòSynchronization problem‚Äô 
between two threads.</p>
<h3>Mutexes</h3>
<p>Now since we have understood the base problem, lets discuss the 
solution to it. The most popular way of achieving thread synchronization
 is by using Mutexes.</p>
    <center>
      <div style="margin-left:2px; margin-top:10px; margin-bottom:10px; ">

        <!-- AD BLOCK -->
		
<script async="" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/adsbygoogle.js"></script>
<!-- TGS Inside Content -->
<ins class="adsbygoogle" style="display: inline-block; width: 300px; height: 250px;" data-ad-client="ca-pub-8090601437064582" data-ad-slot="8643685131" data-adsbygoogle-status="done"><ins id="aswift_1_expand" style="display:inline-table;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent;"><ins id="aswift_1_anchor" style="display:block;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;width:300px;height:250px;" width="300" height="250" frameborder="0"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

        <!-- END AD BLOCK -->

	  </div>
    </center>


<p>A Mutex is a lock that we set before using a shared resource and 
release after using it. When the lock is set, no other thread can access
 the locked region of code. So we see that even if thread 2 is scheduled
 while thread 1 was not done accessing the shared resource and the code 
is locked by thread 1 using mutexes then thread 2 cannot even access 
that region of code. So this ensures a synchronized access of shared 
resources in the code.</p>
<p>Internally it works as follows :</p>
<ul>
<li>Suppose one thread has locked a region of code using mutex and is executing that piece of code.</li>
<li>Now if scheduler decides to do a context switch, then all the other 
threads which are ready to execute the same region are unblocked.</li>
<li>Only one of all the threads would make it to the execution but if 
this thread tries to execute the same region of code that is already 
locked then it will again go to sleep.</li>
<li>Context switch will take place again and again but no thread would 
be able to execute the locked region of code until the mutex lock over 
it is released.</li>
<li>Mutex lock will only be released by the thread who locked it.</li>
<li>So this ensures that once a thread has locked a piece of code then 
no other thread can execute the same region until it is unlocked by the 
thread who locked it.</li>
<li>Hence, this system ensures synchronization among the threads while working on shared resources.</li>
</ul>
<p>A mutex is initialized and then a lock is achieved by calling the following two functions :</p>
<pre>int pthread_mutex_init(pthread_mutex_t *restrict mutex, const pthread_mutexattr_t *restrict attr);
int pthread_mutex_lock(pthread_mutex_t *mutex);</pre>
<p>The first function initializes a mutex and through second function any critical region in the code can be locked.</p>
<p>The mutex can be unlocked and destroyed by calling following functions :</p>
<pre>int pthread_mutex_unlock(pthread_mutex_t *mutex);
int pthread_mutex_destroy(pthread_mutex_t *mutex);</pre>
<p>The first function above releases the lock and the second function 
destroys the lock so that it cannot be used anywhere in future.</p>
<h3>A Practical Example</h3>
<p>Lets see a piece of code where mutexes are used for thread synchronization</p>
<pre>#include&lt;stdio.h&gt;
#include&lt;string.h&gt;
#include&lt;pthread.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;unistd.h&gt;

pthread_t tid[2];
int counter;
pthread_mutex_t lock;

void* doSomeThing(void *arg)
{
    pthread_mutex_lock(&amp;lock);

    unsigned long i = 0;
    counter += 1;
    printf("\n Job %d started\n", counter);

    for(i=0; i&lt;(0xFFFFFFFF);i++);

    printf("\n Job %d finished\n", counter);

    pthread_mutex_unlock(&amp;lock);

    return NULL;
}

int main(void)
{
    int i = 0;
    int err;

    if (pthread_mutex_init(&amp;lock, NULL) != 0)
    {
        printf("\n mutex init failed\n");
        return 1;
    }

    while(i &lt; 2)
    {
        err = pthread_create(&amp;(tid[i]), NULL, &amp;doSomeThing, NULL);
        if (err != 0)
            printf("\ncan't create thread :[%s]", strerror(err));
        i++;
    }

    pthread_join(tid[0], NULL);
    pthread_join(tid[1], NULL);
    pthread_mutex_destroy(&amp;lock);

    return 0;
}</pre>
<p>In the code above :</p>
<ul>
<li>A mutex is initialized in the beginning of the main function.</li>
<li>The same mutex is locked in the ‚ÄòdoSomeThing()‚Äô function while using the shared resource ‚Äòcounter‚Äô</li>
<li>At the end of the function ‚ÄòdoSomeThing()‚Äô the same mutex is unlocked.</li>
<li>At the end of the main function when both the threads are done, the mutex is destroyed.</li>
</ul>
<p>Now if we look at the output, we find :</p>
<pre>$ ./threads
Job 1 started
Job 1 finished
Job 2 started
Job 2 finished</pre>
<p>So we see that this time the start and finish logs of both the jobs 
were present. So thread synchronization took place by the use of Mutex.</p>
<div style="margin:7px 0px 3px 0px; padding:5px; background:#F2F0E8">

<div style="float:left; width=95px">
<div style="text-indent: 0px; margin: 0px; padding: 0px; background: transparent none repeat scroll 0% 0%; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 32px; height: 20px;" id="___plusone_1"><iframe ng-non-bindable="" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 32px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" tabindex="0" vspace="0" id="I7_1509863021644" name="I7_1509863021644" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/fastbutton_002.html" data-gapiattached="true" title="G+" width="100%" frameborder="0"></iframe></div>
</div>

<div style="float:left; width=95px">
<iframe id="twitter-widget-1" scrolling="no" allowtransparency="true" class="twitter-share-button twitter-share-button-rendered twitter-tweet-button" style="position: static; visibility: visible; width: 60px; height: 20px;" title="Twitter Tweet Button" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/tweet_button_002.html" frameborder="0"></iframe><script type="text/javascript" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/widgets.js"></script>
</div>

<div style="float:left; padding:2px; width:90px"><iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.thegeekstuff.com%2F2012%2F05%2Fc-mutex-examples%2F&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" style="border:none; overflow:hidden; width:450px; height:21px;" allowtransparency="true" frameborder="0"></iframe>
</div>

<div style="padding:1px">
&gt;&nbsp;<a href="#commentform" rel="nofollow">Add your comment</a>
</div>

</div>
<h3>If you enjoyed this article, you might also like..</h3>
<table>
<tbody><tr>
<td valign="top">
<ol>
<li><a href="http://www.thegeekstuff.com/2010/12/50-unix-linux-sysadmin-tutorials/">50 Linux Sysadmin Tutorials</a></li>
<li><a href="http://www.thegeekstuff.com/2010/11/50-linux-commands/">50 Most Frequently Used Linux Commands (With Examples)</a></li>
<li><a href="http://www.thegeekstuff.com/2011/12/linux-performance-monitoring-tools/">Top 25 Best Linux Performance Monitoring and Debugging Tools</a></li>
<li><a href="http://www.thegeekstuff.com/2009/03/15-practical-linux-find-command-examples/">Mommy, I found it! ‚Äì 15 Practical Linux Find Command Examples</a></li>
<li><a href="http://www.thegeekstuff.com/linux-101-hacks-ebook/">Linux 101 Hacks 2nd Edition eBook</a>&nbsp;<img title="Linux 101 Hacks Book" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/free-small.png" alt="Linux 101 Hacks Book"></li>
</ol>
</td>
<td>
<ul>
<li><a href="http://www.thegeekstuff.com/2010/01/awk-introduction-tutorial-7-awk-print-examples/">Awk Introduction ‚Äì 7 Awk Print Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2009/10/unix-sed-tutorial-advanced-sed-substitution-examples/">Advanced Sed Substitution Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2009/03/8-essential-vim-editor-navigation-fundamentals/">8 Essential Vim Editor Navigation Fundamentals</a></li>
<li><a href="http://www.thegeekstuff.com/2011/06/iptables-rules-examples/">25 Most Frequently Used Linux IPTables Rules Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2008/08/turbocharge-putty-with-12-powerful-add-ons-software-for-geeks-3/">Turbocharge PuTTY with 12 Powerful Add-Ons</a></li>
</ul>
</td>
</tr>
</tbody></table>
<br>
<center>
<table id="booktable">
<tbody><tr>
<td>
<a rel="nofollow" href="http://www.thegeekstuff.com/bash-101-hacks-ebook/"><img title="Bash 101 Hacks Book" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/bash-132.png" alt="Bash 101 Hacks Book"></a>
</td>
<td>
<a rel="nofollow" href="http://www.thegeekstuff.com/sed-awk-101-hacks-ebook/"><img title="Sed and Awk 101 Hacks Book" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/sed-and-awk-132.png" alt="Sed and Awk 101 Hacks Book"></a>
</td>
<td>
<a rel="nofollow" href="http://www.thegeekstuff.com/nagios-core-ebook/"><img title="Nagios Core 3 Book" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/nagios-core-132.png" alt="Nagios Core 3 Book"></a>
</td>
<td>
<a rel="nofollow" href="http://www.thegeekstuff.com/vim-101-hacks-ebook/"><img title="Vim 101 Hacks Book" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/vim-101-hacks-132.png" alt="Vim 101 Hacks Book"></a>
</td>
</tr>
</tbody></table>
</center>
<br>
				</div>
				<p class="post_tags" itemprop="keywords">
					<span class="post_tags_intro">Tagged as:</span>
					<a href="http://www.thegeekstuff.com/tag/pthread_mutex_destroy-examples/" rel="tag">pthread_mutex_destroy Examples</a>,
					<a href="http://www.thegeekstuff.com/tag/pthread_mutex_init-examples/" rel="tag">pthread_mutex_init Examples</a>,
					<a href="http://www.thegeekstuff.com/tag/pthread_mutex_lock-examples/" rel="tag">pthread_mutex_lock Examples</a>,
					<a href="http://www.thegeekstuff.com/tag/pthread_mutex_unlock-examples/" rel="tag">pthread_mutex_unlock Examples</a>
				</p>
			</div>
			<div id="comments">
				<p class="comments_intro"><span class="bracket">{</span> <span class="num_comments">43</span> comments‚Ä¶ <a href="#commentform" rel="nofollow">add one</a> <span class="bracket">}</span></p>
				<ul class="comment_list">
					<li class="comment even thread-even depth-1" id="comment-229545">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">chmurli</span>
							<span class="comment_date">May 3, 2012, 3:18 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-229545"><p>This example is utterly bad! Using mutex this way you complely make threads useless!</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-229545" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-229564">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Himanshu</span>
							<span class="comment_date">May 3, 2012, 4:23 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-229564"><p>@chmurli<br>
Can you provide some details regarding your comment?</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-229564" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-229712">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">chmurli</span>
							<span class="comment_date">May 3, 2012, 2:01 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-229712"><p>Basically
 you had blocked second thread until first thread is comleted (by using 
mutex). This way all advantages of using threads are gone.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-229712" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-229913">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Himanshu</span>
							<span class="comment_date">May 4, 2012, 2:45 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-229913"><p>@chmurli<br>
This articles speaks of thread synchronization using mutex and hence I 
have given a small example on how to use mutex. I have used mutex on a 
critical section of code and I dont think this is wrong.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-229913" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-229932">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">engeland</span>
							<span class="comment_date">May 4, 2012, 3:57 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-229932"><p>I have 
to agree with chmurli in every sense! Writing code for threads in this 
way is just a failure! A global variable is a bad example for restricted
 resources which have to be protected by mutexes. At least comment on 
your choice, so novices are not tempted to write such code in production
 code. A slightly (still not good) better example it would have been if 
you protect a copy of the global variable into a thread local one.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-229932" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-230265">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Himanshu Arora</span>
							<span class="comment_date">May 5, 2012, 2:17 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-230265"><p>@engeland<br>
‚ÄúA global variable is a bad example for restricted resources which have to be protected by mutexes‚Äù<br>
Can you please justify your statement?</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-230265" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-234911">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">gatsu</span>
							<span class="comment_date">May 16, 2012, 5:02 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-234911"><p>@engeland<br>
The article (specifically part 4) is not about writing multi threaded code.  The author is simply showing how mutexes are used.<br>
The article is good and helpful because it shows failing and passing cases.</p>
<p>Thanks,</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-234911" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-237016">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">engeland</span>
							<span class="comment_date">May 21, 2012, 4:14 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-237016"><p>@gatsu: mutexes are about multi threaded code. Mutexes in single threaded code are nonsense.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-237016" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-239305">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">fok</span>
							<span class="comment_date">May 25, 2012, 7:35 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-239305"><p>@engeland:
 Why you thing that using global variable is wrong int this case? Just 
because it is bad programmer practice it doesn‚Äôt mean it is bad example 
of resource, that can be protected by mutexes. Should have Himanshu use 
static variables? He could but would be code more understandable to 
newbies then? NO. And this is the key point of examples. Make it as 
simple as possible. On the other hand you are right that it might have 
been mentioned that global variables are bad programming habit.<br>
@chmurli: Same as for global variable stands for your comment about 
single threaded code. This is total simplification of mutex 
synchronization. Whole code is part of the critical section and thus 
protected. In that case is it of course works serially. Just add 
anything before pthread_mutex_lock or after pthread_mutex_unlock and you
 have nice multithreaded program.<br>
@Himansu: Thanks for this nice example.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-239305" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-239436">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Himanshu</span>
							<span class="comment_date">May 25, 2012, 12:12 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-239436"><p>@fok<br>
Thanks a lot for pointing out precisely what I wanted to convey through this article.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-239436" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-263403">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Saurabh Arora</span>
							<span class="comment_date">July 3, 2012, 2:55 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-263403"><p>Hi Himanshu,<br>
Whatever ppl say this link is very useful for newbies.<br>
Ppl should appreciate the efforts for explain threads in so simple form.<br>
If Ppl want more advance examples they can refer to google and get numerous tough examples which even they can‚Äôt solve.<br>
Any way I sincerely thank you for your efforts.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-263403" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264888">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Himanshu</span>
							<span class="comment_date">July 5, 2012, 10:01 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-264888"><p>@Saurabh Arora<br>
Thanks Saurabh!!!!</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-264888" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-289784">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Eugene</span>
							<span class="comment_date">August 23, 2012, 11:44 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-289784"><p>This article explained me exactly what I needed to understand: what mutex is for.<br>
To those who criticise (chmurli,‚Ä¶): Please understand that people 
sometimes just need exactly what they are looking for. I wanted to 
understand mutex. I did not need explanations about the whole threads 
theory,  parallel programming concepts, etc‚Ä¶   And I am  not a beginner 
in threads‚Ä¶ (Used in Java, Windows‚Ä¶) I just never used POSIX threads 
before and this article helped me a lot.  I want to thank the author.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-289784" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-342197">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Senthil</span>
							<span class="comment_date">October 17, 2012, 12:43 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-342197"><p>Your article is very helpful for newb. Thanks for the article.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-342197" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-366750">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Jack</span>
							<span class="comment_date">November 5, 2012, 10:16 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-366750"><p>I was 
searching for an example on how (not) synchronization of threads could 
go wrong. My programming books only tell me to ‚Äòwatch out‚Äô, but it is 
far more fun to see it go wrong in my own console. The code you provided
 is exactly what I was searching for, so thanks!</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-366750" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-430713">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">harry</span>
							<span class="comment_date">December 12, 2012, 9:32 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-430713"><p>thanks a lots for understanding of mutex</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-430713" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-487496">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">neevek</span>
							<span class="comment_date">January 10, 2013, 10:57 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-487496"><p>This 
article is really helpful, it explained when synchronization is needed, 
and how to use mutex to synchronize code, which I believe is what the 
article is meant to be conveyed. Thank you Himanshu, for your efforts.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-487496" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-519108">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">kartheek</span>
							<span class="comment_date">January 28, 2013, 1:38 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-519108"><p>Thanks for this example, i got what i want from this</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-519108" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-535458">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Alex</span>
							<span class="comment_date">February 8, 2013, 9:57 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-535458"><p>Great article for noobs like me üòõ</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-535458" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-582614">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">pizza</span>
							<span class="comment_date">March 18, 2013, 5:35 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-582614"><p>I think 
chmurli has made a valid point where the second thread is being blocked 
until thread one is finished. @Himansu can you please let me know how 
can we solve this?Thanks for the article.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-582614" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-591760">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">James</span>
							<span class="comment_date">March 21, 2013, 6:15 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-591760"><p>This is 
horrible.  Not only is chmurli correct, you can‚Äôt return NULL from a 
void function.  NULL is an actual integer value.  This function is void 
not int.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-591760" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-591781">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">James</span>
							<span class="comment_date">March 21, 2013, 6:33 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-591781"><p>My bad ‚Ä¶ void*</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-591781" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-603563">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Pras</span>
							<span class="comment_date">March 27, 2013, 9:25 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-603563"><p>I am 
totally new to Threads, Mutexes, after reading this example, I got the 
Basic of MUTEX &amp; its use case. With this knowledge, I think, I can 
understand any other Mutex applications.</p>
<p>But, my humble request to author, is to provide additional Example, which could answer the critics (basically geeks).</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-603563" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-613725">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">badboy</span>
							<span class="comment_date">March 30, 2013, 2:46 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-613725"><p>Greeting folks,</p>
<p>I think author could have done better. I see few problems in this 
article. Let me try to improve it. Before explaining mutexes or other 
synchronization mechanisms, let me try to explain why we need 
synchronization mechanisms.</p>
<p>Suppose, a bank has a transaction processing system to manage online 
transactions of account holders and it has one process running(account 
holders data loaded in memory as global shared data) which, when any 
transaction request comes creates a thread to serve it. As we know that 
threads of a process have access to the global data and can execute 
concurrently. Simultaneous modification of shared data may result in 
data inconsistency. Let us see how‚Ä¶.<br>
Suppose, you have a bank account with some balance amount Rs. 100. Its 
not enough to meet one month expenditure, so you asked your dad and 
brother to deposit some money in your account. Now, suppose your dad and
 brother both tried to deposit money at the same time. To serve their 
request, server process creates two threads, one for each to let them 
deposit money. Suppose, to deposit money, thread updates account balance
 as follows ‚Äì<br>
       1.    OldBalance = your_account.balance<br>
       2.    NewBalance = OldBalance +  depositedAmount<br>
       3.    your_account.balance = NewBalance<br>
Now in your dad and brother‚Äôs case they started depositing money at the 
same time so both threads take OldBalance = 100. Both threads do 
calculation of NewBalance separately as<br>
               thread(1)   NewBalance = 100 + 10000 ‚Äî‚Äî&gt; dad deposited Rs. 10000.<br>
               thread(2)   NewBalance = 100 + 5000 ‚Äî‚Äî‚Äì&gt; brother deposited Rs. 5000.<br>
Now suppose thread(2) updates your account balance as Rs. 5100, and just
 after that thread(1) updates your account balance to Rs. 10100. So, 
your final account balance is Rs. 10100. Happy???? Maybe not. So, in 
effect, the money deposited by your brother hasn‚Äôt been credited into 
your account. This is why we need synchronization mechanisms.</p>
<p>Now, Lets implement one transaction processing system using mutex to fix data inconsistency problem.</p>
<p>//: tp_system_using_mutex.c<br>
#include<br>
#include<br>
#include </p>
<p>struct account {<br>
	char name[20];<br>
	int balance;<br>
};</p>
<p>//Globally shared account details<br>
struct account yac = {‚Äúbadboy‚Äù, 100};</p>
<p>//Lock to be used while updating account balance<br>
pthread_mutex_t lock;</p>
<p>void* deposit(void* data) {<br>
	int ammount = *((int*)data);<br>
	printf(‚ÄúAccount Holder: %s, Current balance: Rs. %d\n‚Äù, yac.name, yac.balance);</p>
<p>	printf(‚ÄúDepositing Rs. %d‚Ä¶\n‚Äù, ammount);<br>
	pthread_mutex_lock(&amp;lock);<br>
	yac.balance += ammount;<br>
	pthread_mutex_unlock(&amp;lock);</p>
<p>	printf(‚ÄúAccount Holder: %s, Updated balance: Rs. %d\n\n‚Äù, yac.name, yac.balance);</p>
<p>	return (void*)NULL;<br>
}</p>
<p>int main(int argc, char** argv) {<br>
	int i, n;<br>
	n = 2;	//Increase value of n to simulate more concurrent requests<br>
	pthread_t tid[n];<br>
	int deposit_ammount[n];</p>
<p>	//Fill the deposit_ammount array with random values between 1 to 10000<br>
	for(i = 0; i &lt; n; i++)<br>
		deposit_ammount[i] = 1 + (int)(10000.0 * (rand()/(RAND_MAX + 1.0)));</p>
<p>	//n number of concurrent request to deposit money in account<br>
	for(i = 0; i &lt; n; i++)<br>
		while(pthread_create(&amp;tid[i], NULL, &amp;deposit, (void*)&amp;deposit_ammount[i])) {<br>
			printf("Thread creation failed! Please try later!\n");<br>
			sleep(1);<br>
		}</p>
<p>	for(i = 0; i &lt; n; i++)<br>
		pthread_join(tid[i], NULL);</p>
<p>	return 0;<br>
}</p>
<p>Save and compile as follows ‚Äì<br>
$ gcc -lpthread </p>
<p>If you see the output you may be surprised that both threads take 
same old account balance(Rs 100) but still the update value is correct, 
all hail to mutex :).</p>
<p>‚Ä¶Namaste &amp; cheers‚Ä¶</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-613725" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-643980">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Bryson</span>
							<span class="comment_date">April 9, 2013, 3:16 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-643980"><p>For 
everyone saying this is a terrible example, you aren‚Äôt seeing what this 
was really suppose to be. He didn‚Äôt say anywhere this is suppose to be 
multi-threaded. It helped me solve the single lane bridge problem. Try 
doing that problem with multiple threads (or multi-threaded) with NO 
critical sections and just try and tell me you didn‚Äôt have any threads 
get deadlocked. The only difference between what I had to do and this 
guy is one additional array of threads, another function, and instead of
 a counter, I used char*.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-643980" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-764958">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Amit</span>
							<span class="comment_date">May 28, 2013, 12:34 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-764958"><p>Thanks</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-764958" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-840370">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">ShreeRaam</span>
							<span class="comment_date">July 11, 2013, 12:13 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-840370"><p>Really good article on threads and mutexes.<br>
It‚Äôs a very useful in understanding the thread concepts for the beginners .<br>
Appreciate your effort.</p>
<p>Thanks,<br>
ShreeRaam</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-840370" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-917128">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Rajat</span>
							<span class="comment_date">September 4, 2013, 9:43 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-917128"><p>I 
thought this was a really nice example !!! Thanks Himanshu and Bad Boy 
!!! I would like  chmurli write a more practical but succinct example of
 how threads are used in the real world. My understanding is that 
Mutexes lock global resources, be it a counter or whatever and a thread 
needs to lock the resource as specified in the example in order to use 
it‚Ä¶.so not sure why some think this is a bad example of how to implement
 Mutexes.  As a matter-of-fact this is exactly how Threads implement 
Mutexes‚Ä¶. A follow on example could deal with the hazards of 
Mutexes..deadlocks and such‚Ä¶the O‚ÄôRiley book on Pthread does an 
excellent job‚Ä¶.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-917128" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-974655">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Sheshu</span>
							<span class="comment_date">October 10, 2013, 9:11 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-974655"><p>Nice Article. All of them. Thanks for the Examples, Very Simple and Understandable :). Keep Posting</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-974655" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1016238">
						<div class="comment_head">
							<span class="avatar"><a href="http://www.ziyaeen.com/" rel="nofollow"></a></span>
							<span class="comment_author"><a href="http://www.ziyaeen.com/" rel="external nofollow" class="url">Khaled Ziyaeen</a></span>
							<span class="comment_date">November 4, 2013, 8:12 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-1016238"><p>Good Article! This isn‚Äôt about threads so much so as it is about using mutex locks in C. Fantastic! Thank you!</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-1016238" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-1175059">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Ramesh</span>
							<span class="comment_date">January 6, 2014, 12:42 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-1175059"><p>Hi,<br>
This article is very good, i searched in so many sites &amp; books but i
 unable to understand properly. but this article helped me a lot. Thank 
you so much author.</p>
<p>@badboy: your explanation about mutex is so good. Thanks a lot.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-1175059" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1239150">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Gabriel Dias</span>
							<span class="comment_date">January 29, 2014, 5:12 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-1239150"><p>Himanshu and BadBoy.</p>
<p>Thank you for the helpful explanations.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-1239150" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-1258115">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Benyas</span>
							<span class="comment_date">February 8, 2014, 7:37 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-1258115"><p>Je vous remercie pour ces explications.</p>
<p>Grossomodo les mutex servent √† g√©rer les threads pour qu‚Äôil n‚Äôy a pas
 ce qu‚Äôon appelle interf√©rence entre deux threads ou chevauchement. </p>
<p>La mutex prot√®ge l‚Äôex√©cution d‚Äôun premier thread jusqu‚Äô√† ce que 
l‚Äôex√©cution finisse, puis la mutex se d√©v√©rouille pour commencer un 
nouveau processus.</p>
<p>‚Äî-French to English translation‚Äî-<br>
Thank you for these explanations. </p>
<p>Grossomodo mutexes are used to manage threads so that there is no so-called interference or overlap between two threads. </p>
<p>The mutex protects the execution of a first thread until execution finishes, then unlocks the mutex to start a new process.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-1258115" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1391539">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Denis</span>
							<span class="comment_date">March 26, 2014, 2:24 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-1391539"><p>Thanks 
for this article! I just read a script of my lecture and did actually 
not understand anything about Mutexes, especially NOT how to use them.<br>
Your example is great for understanding the basics and a.t.m. it doesn‚Äôt matter to me how it could be done better. üòÄ</p>
<p>Greetings</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-1391539" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-1553929">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Pramod</span>
							<span class="comment_date">April 24, 2014, 10:05 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-1553929"><p>Hi,</p>
<p>Thanks for the example on using mutex locks.</p>
<p>The above example works well ‚Äòcounter‚Äô variable declared as static. when i executed the example using gcc.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-1553929" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-2348797">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Jeff Su</span>
							<span class="comment_date">October 1, 2014, 5:16 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-2348797"><p>Hello everyone,<br>
I try to run the code in qemu, and add more thread to join. for example, I add 5 threads and join them.<br>
But it doesn‚Äôt work, is there any one could help me‚Ä¶<br>
jeff@jeff-VirtualBox:~/arm-lecture-my/arm-lecture/lab-2$ make clean; make qemu<br>
rm -f atomic.o mutex.o atomic<br>
arm-linux-gnueabihf-gcc -c -pthread -static  -o atomic.o atomic.c<br>
arm-linux-gnueabihf-gcc -c -pthread -static  -o mutex.o mutex.s<br>
arm-linux-gnueabihf-gcc -pthread -static  -o atomic atomic.o mutex.o<br>
qemu-arm ./atomic<br>
create thread 0 ok</p>
<p> Job 1 started<br>
create thread 1 ok<br>
create thread 2 ok<br>
qemu: uncaught target signal 11 (Segmentation fault) ‚Äì core dumped<br>
make: *** [qemu] Segmentation fault (core dumped)</p>
<p>here‚Äôs my Makefile:<br>
CC	= arm-linux-gnueabihf-gcc<br>
CFLAGS	= -pthread -static</p>
<p>objects = atomic.o mutex.o</p>
<p>default: atomic</p>
<p>.PHONY: default clean</p>
<p>atomic: $(objects)<br>
	$(CC) $(CFLAGS) -o $@ $^</p>
<p>atomic.o: atomic.c<br>
mutex.o: mutex.s</p>
<p>%.o: %.c<br>
	$(CC) -c $(CFLAGS) -o $@ $&lt;</p>
<p>%.o: %.s<br>
	$(CC) -c $(CFLAGS) -o $@ $&lt;</p>
<p>clean:<br>
	rm -f $(objects) atomic</p>
<p>qemu: atomic<br>
	qemu-arm ./atomic<br>
#	qemu-arm -g 1234 -L /usr/arm-linux-gnueabihf ./atomic &amp;<br>
#	arm-none-eabi-gdb ./atomic</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-2348797" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-3849078">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">leelanaresh</span>
							<span class="comment_date">March 1, 2015, 3:05 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-3849078"><p>thank you nice explanation</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-3849078" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-4159692">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Charan</span>
							<span class="comment_date">May 25, 2015, 10:49 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-4159692"><p>Good 
job by the writer!. I understood all about what this article wanted to 
convey. Chmurli you should give an example and explain as badboy did. 
Thank you bad boy for giving a nice example.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-4159692" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-4232395">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">MetthewsEmbeddedSystems</span>
							<span class="comment_date">June 13, 2015, 11:50 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-4232395"><p>I 
disagree, this was a wonderfully clear example for understanding how a 
MUTEX works and opperates. Offcourse the example undermines the use of 
it‚Äôs own threads, but that‚Äôs not what this example is about. Mind this 
article is meant for beginners in this field. And obvious this is a very
 basic example which explains very clear the working the MUTEX, with 
adding almost no extra mental overhead concerning multithreading, which 
this article isn‚Äôt about. Thanks to the writer, this really helped a 
beginner like me, completely new to multithreading. I now have a very 
clear understanding on the working of MUTEX and how to implement this! 
Wish more tutorials were as comprehensive as this one! Excuse me for 
possible grammer mistakes.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-4232395" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-4246378">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">mehran</span>
							<span class="comment_date">June 16, 2015, 3:39 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-4246378"><p>that was useful thanks</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-4246378" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-4634487">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Anonymous</span>
							<span class="comment_date">December 8, 2015, 1:52 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-4634487"><p>Good Explanation.</p>
<p>Keep Posting .Thank you</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-4634487" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-4909228">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">hari</span>
							<span class="comment_date">January 21, 2017, 9:26 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-4909228"><p>Keep posting goodone</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-4909228" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-4954002">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Gajanan Patil</span>
							<span class="comment_date">May 3, 2017, 10:21 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-4954002"><p>in pthread_mutex_init();     what is the use of second argument please explain‚Ä¶</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="#comment-4954002" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
				</ul>
				<form id="commentform" method="post" action="http://www.thegeekstuff.com/wp-comments-post.php">
					<a rel="nofollow" id="cancel-comment-reply-link" href="http://www.thegeekstuff.com/2012/05/c-mutex-examples/?refcom#respond" style="display:none;">Cancel reply</a>
					<p class="comment_form_title">Leave a Comment</p>
					<p id="comment_form_name">
						<label for="author">Name</label>
						<input id="author" class="input_text" name="author" tabindex="1" type="text">
					</p>
					<p id="comment_form_email">
						<label for="email">Email</label>
						<input id="email" class="input_text" name="email" tabindex="2" type="text">
					</p>
					<p id="comment_form_url">
						<label for="url">Website</label>
						<input id="url" class="input_text" name="url" tabindex="3" type="text">
					</p>
					<p id="comment_form_comment">
						<label for="comment">Comment</label>
						<textarea name="comment" id="comment" class="input_text" tabindex="4" rows="6"></textarea>
					</p>
					<p id="comment_form_submit">
						<input id="submit" class="input_submit" name="submit" tabindex="5" value="Submit" type="submit">
					</p>
<p style="display: none;"><input id="akismet_comment_nonce" name="akismet_comment_nonce" value="cc30548574" type="hidden"></p>

	<p style="clear: both;" class="subscribe-to-comments">
	<input name="subscribe" id="subscribe" value="subscribe" style="width: auto;" type="checkbox">
	<label for="subscribe">Notify me of followup comments via e-mail</label>
	</p>


<p style="display: none;"></p><input name="comment_post_ID" value="10272" id="comment_post_ID" type="hidden">
<input name="comment_parent" id="comment_parent" value="0" type="hidden">
				<input id="ak_js" name="ak_js" value="1509856400713" type="hidden"></form>
			</div>
			<div class="prev_next">
				<p class="next_post">Next post: <a href="http://www.thegeekstuff.com/2012/05/route-flags/" rel="next">IP Routing: Linux Route Flags (U ‚Äì Up, G ‚Äì Gateway, H ‚Äì Host)</a></p>
				<p class="previous_post">Previous post: <a href="http://www.thegeekstuff.com/2012/05/backup-ubuntu-desktop/" rel="prev">Top 7 Ubuntu Desktop Backup Software</a></p>
			</div>
		</div>
		<div class="sidebar">
<div class="widget widget_text" id="text-21">			<div class="textwidget"><a title="Subscribe via RSS" href="http://www.thegeekstuff.com/feed" rel="nofollow">RSS</a>&nbsp; | &nbsp;<a title="Subscribe via Email" href="http://feedburner.google.com/fb/a/mailverify?uri=TheGeekStuff&amp;loc=en_US" rel="nofollow">Email</a>&nbsp; | &nbsp;<a title="Follow us on Twitter" href="http://twitter.com/thegeekstuff" rel="nofollow">Twitter</a>&nbsp; | &nbsp;<a title="Become a fan" href="http://www.facebook.com/thegeekstuff" rel="nofollow">Facebook</a>&nbsp; | &nbsp;<a title="Follow us on Google+" href="https://plus.google.com/112493711428194838421/posts">Google+</a>
<br><br>
<form action="http://www.thegeekstuff.com/search" id="cse-search-box">
  <div>
    <input name="cx" value="005666763606120661560:zkmegbt_djm" type="hidden">
    <input name="cof" value="FORID:10" type="hidden">
    <input name="ie" value="UTF-8" type="hidden">
    <input style="background: rgb(255, 255, 255) url(&quot;https://www.google.com/cse/static/images/1x/googlelogo_lightgrey_46x16dp.png&quot;) no-repeat scroll left center; text-indent: 48px;" name="q" size="30" placeholder="Custom Search" type="text">
    <input style="border-color:#CCCCCC #999999 #999999 #CCCCCC; border-style:double; border-width:1px; overflow:visible;" name="sa" value="Search" type="submit">
  </div>
<input name="siteurl" value="www.thegeekstuff.com/2012/05/c-mutex-examples/?refcom" type="hidden"><input name="ref" value="www.google.co.in/" type="hidden"><input name="ss" type="hidden"></form>
<script type="text/javascript" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/jsapi"></script>
<script type="text/javascript">google.load("elements", "1", {packages: "transliteration"});</script><script src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/a" type="text/javascript"></script><link href="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/transliteration.css" type="text/css" rel="stylesheet"><script src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/transliteration.js" type="text/javascript"></script>
<script type="text/javascript" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/t13n"></script>
<script type="text/javascript" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/brand"></script>
<br></div>
		</div><div class="widget widget_text" id="text-3">			<div class="textwidget"><script async="" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/adsbygoogle.js"></script>
<!-- TGS Side Bar -->
<ins class="adsbygoogle" style="display: inline-block; width: 300px; height: 250px;" data-ad-client="ca-pub-8090601437064582" data-ad-slot="9054077260" data-adsbygoogle-status="done"><ins id="aswift_2_expand" style="display:inline-table;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent;"><ins id="aswift_2_anchor" style="display:block;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_2" name="aswift_2" style="left:0;position:absolute;top:0;width:300px;height:250px;" width="300" height="250" frameborder="0"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<br></div>
		</div><div class="widget widget_text" id="text-4"><p class="widget_title">EBOOKS</p>			<div class="textwidget"><ul>
<li><img title="Linux 101 Hacks Book" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/free-small.png" alt="Linux 101 Hacks Book">&nbsp;<a href="http://www.thegeekstuff.com/linux-101-hacks-ebook/">Linux 101 Hacks 2nd Edition eBook</a> - Practical Examples to Build a Strong Foundation in Linux</li>
<li><a href="http://www.thegeekstuff.com/bash-101-hacks-ebook/">Bash 101 Hacks eBook</a> - Take Control of Your Bash Command Line and Shell Scripting</li>
<li><a href="http://www.thegeekstuff.com/sed-awk-101-hacks-ebook/">Sed and Awk 101 Hacks eBook</a> - Enhance Your UNIX / Linux Life with Sed and Awk</li>
<li><a href="http://www.thegeekstuff.com/vim-101-hacks-ebook/">Vim 101 Hacks eBook</a> - Practical Examples for Becoming Fast and Productive in Vim Editor</li>
<li><a href="http://www.thegeekstuff.com/nagios-core-ebook/">Nagios Core 3 eBook</a> - Monitor Everything, Be Proactive, and Sleep Well</li>
</ul></div>
		</div><div class="widget widget_text" id="text-22">			<div class="textwidget"><iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fthegeekstuff&amp;width&amp;height=258&amp;colorscheme=light&amp;show_faces=true&amp;header=false&amp;stream=false&amp;show_border=true" scrolling="no" style="border:none; overflow:hidden; height:258px;" allowtransparency="true" frameborder="0"></iframe></div>
		</div><div class="widget widget_text" id="text-17"><p class="widget_title">POPULAR POSTS</p>			<div class="textwidget"><ul>
<li><a href="http://www.thegeekstuff.com/dslr-accessories/">15 Essential Accessories for Your Nikon or Canon DSLR Camera</a></li>
<li><a href="http://www.thegeekstuff.com/2009/01/12-amazing-and-essential-linux-books-to-enrich-your-brain-and-library/">12 Amazing and Essential Linux Books To Enrich Your Brain and Library</a></li>
<li><a href="http://www.thegeekstuff.com/2010/12/50-unix-linux-sysadmin-tutorials/">50 UNIX / Linux Sysadmin Tutorials</a></li>
<li><a href="http://www.thegeekstuff.com/2010/11/50-linux-commands/">50 Most Frequently Used UNIX / Linux Commands (With Examples)</a></li>
<li><a href="http://www.thegeekstuff.com/2010/08/gtd-getting-things-done/">How To Be Productive and Get Things Done Using GTD</a></li>
<li><a href="http://www.thegeekstuff.com/2010/03/30-things-to-do-when-you-are-bored-and-have-a-computer/">30 Things To Do When you are Bored and have a Computer</a></li>
<li><a href="http://www.thegeekstuff.com/2010/09/linux-file-system-structure/">Linux Directory Structure (File System Structure) Explained with Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2009/06/15-practical-crontab-examples/">Linux Crontab: 15 Awesome Cron Job Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2009/03/15-practical-unix-grep-command-examples/">Get a Grip on the Grep! ‚Äì 15 Practical Grep Command Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2009/07/linux-ls-command-examples/">Unix LS Command: 15 Practical Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2008/08/15-examples-to-master-linux-command-line-history/">15 Examples To Master Linux Command Line History</a></li>
<li><a href="http://www.thegeekstuff.com/2010/08/bug-tracking-system/">Top 10 Open Source Bug Tracking System</a></li>
<li><a href="http://www.thegeekstuff.com/2009/01/vi-and-vim-macro-tutorial-how-to-record-and-play/">Vi and Vim Macro Tutorial: How To Record and Play</a></li>
<li><a href="http://www.thegeekstuff.com/2009/03/15-practical-linux-find-command-examples/">Mommy, I found it! -- 15 Practical Linux Find Command Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2009/07/best-gmail-tips-and-tricks/">15 Awesome Gmail Tips and Tricks</a></li>
<li><a href="http://www.thegeekstuff.com/2009/06/expertise-in-google-search/">15 Awesome Google Search Tips and Tricks</a></li>
<li><a href="http://www.thegeekstuff.com/2010/08/raid-levels-tutorial/">RAID 0, RAID 1, RAID 5, RAID 10 Explained with Diagrams</a></li>
<li><a href="http://www.thegeekstuff.com/2010/01/15-practical-unix-linux-top-command-examples/">Can You Top This? 15 Practical Linux Top Command Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2009/09/top-5-best-network-monitoring-tools/">Top 5 Best System Monitoring Tools</a></li>
<li><a href="http://www.thegeekstuff.com/2009/06/top-5-best-linux-os-distributions/">Top 5 Best Linux OS Distributions</a></li>
<li><a href="http://www.thegeekstuff.com/2008/06/how-to-monitor-remote-linux-host-using-nagios-30/">How To Monitor Remote Linux Host using Nagios 3.0</a></li>
<li><a href="http://www.thegeekstuff.com/2010/01/awk-introduction-tutorial-7-awk-print-examples/">Awk Introduction Tutorial ‚Äì 7 Awk Print Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2010/09/rsync-command-examples/">How to Backup Linux? 15 rsync Command Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2009/09/the-ultimate-wget-download-guide-with-15-awesome-examples/">The Ultimate Wget Download Guide With 15 Awesome Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2009/07/top-5-best-linux-text-editors/">Top 5 Best Linux Text Editors</a></li>
<li><a href="http://www.thegeekstuff.com/2010/08/tcpdump-command-examples/">Packet Analyzer: 15 TCPDUMP Command Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2010/06/bash-array-tutorial/">The Ultimate Bash Array Tutorial with 15 Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2008/11/3-steps-to-perform-ssh-login-without-password-using-ssh-keygen-ssh-copy-id/">3 Steps to Perform SSH Login Without Password Using ssh-keygen &amp; ssh-copy-id</a></li>
<li><a href="http://www.thegeekstuff.com/2009/10/unix-sed-tutorial-advanced-sed-substitution-examples/">Unix Sed Tutorial: Advanced Sed Substitution Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2010/03/netstat-command-examples/">UNIX / Linux: 10 Netstat Command Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2008/06/the-ultimate-guide-for-creating-strong-passwords/">The Ultimate Guide for Creating Strong Passwords</a></li>
<li><a href="http://www.thegeekstuff.com/2008/08/6-steps-to-secure-your-home-wireless-network/">6 Steps to Secure Your Home Wireless Network</a></li>
<li><a href="http://www.thegeekstuff.com/2008/08/turbocharge-putty-with-12-powerful-add-ons-software-for-geeks-3/">Turbocharge PuTTY with 12 Powerful Add-Ons</a></li>
</ul></div>
		</div><div class="widget widget_text" id="text-19"><p class="widget_title">CATEGORIES</p>			<div class="textwidget"><ul>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/linux/">Linux Tutorials</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/vim-2/">Vim Editor</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/sed/">Sed Scripting</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/awk/">Awk Scripting</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/bash-2/">Bash Shell Scripting</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/nagios-2/">Nagios Monitoring</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/openssh-2/">OpenSSH</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/iptables/">IPTables Firewall</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/apache/">Apache Web Server</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/mysql/">MySQL Database</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/perl/">Perl Programming</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/google/">Google Tutorials</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/ubuntu/">Ubuntu Tutorials</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/postgresql/">PostgreSQL DB</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/hello-world/">Hello World Examples</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/c-programming/">C Programming</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/c-plus-plus/">C++ Programming</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/dell-2/">DELL Server Tutorials</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/oracle/">Oracle Database</a></li>
<li><a rel="nofollow" href="http://www.thegeekstuff.com/category/vmware/">VMware Tutorials</a></li>
</ul></div>
		</div><div class="widget widget_text" id="text-20">			<div class="textwidget"><div style="text-indent: 0px; margin: 0px; padding: 0px; background: transparent none repeat scroll 0% 0%; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 300px; height: 106px;" id="___person_0"><iframe ng-non-bindable="" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 300px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 106px;" tabindex="0" vspace="0" id="I8_1509863021659" name="I8_1509863021659" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/person.html" data-gapiattached="true" title="+Badge" width="100%" frameborder="0"></iframe></div></div>
		</div>		</div>
	</div>
	<div class="footer">
<div id="footer_widgets" class="columns_3">
	<div class="one-third sidebar first">
<div class="widget widget_text" id="text-7"><h4 class="widget_title">About The Geek Stuff</h4>			<div class="textwidget"><br>
<img class="float" title="Ramesh Natarajan" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/ramesh-small.gif" alt="Linux 101 Hacks Book">
My name is <strong>Ramesh Natarajan</strong>. I will be posting 
instruction guides, how-to, troubleshooting tips and tricks on Linux, 
database, hardware, security and web. My focus is to write articles that
 will either teach you or help you resolve a problem. Read more about <a href="http://www.thegeekstuff.com/about/">Ramesh Natarajan</a> and the blog.</div>
		</div>	</div>
	<div class="one-third sidebar">
<div class="widget widget_text" id="text-9"><h4 class="widget_title">Contact Us</h4>			<div class="textwidget"><br>
<strong>Email Me :</strong>
Use this <a href="http://www.thegeekstuff.com/contact" rel="nofollow">Contact Form</a>
 to get in touch me with your comments, questions or suggestions about 
this site. You can also simply drop me a line to say hello!.
<br><br>
<a title="Follow us on Google+" href="https://plus.google.com/112493711428194838421/posts">Follow us on Google+</a>
<br><br>
<a title="Follow us on Twitter" href="http://twitter.com/thegeekstuff" rel="nofollow">Follow us on Twitter</a>
<br><br>
<a href="http://www.facebook.com/thegeekstuff" rel="nofollow">Become a fan on Facebook</a>&nbsp;&nbsp;</div>
		</div>	</div>
	<div class="one-third sidebar last">
<div class="widget widget_text" id="text-8"><h4 class="widget_title">Support Us</h4>			<div class="textwidget"><br>
Support this blog by purchasing one of my ebooks.
<br><br>
<a rel="nofollow" href="http://www.thegeekstuff.com/bash-101-hacks-ebook/">Bash 101 Hacks eBook</a>
<br><br>
<a rel="nofollow" href="http://www.thegeekstuff.com/sed-awk-101-hacks-ebook/">Sed and Awk 101 Hacks eBook</a>
<br><br>
<a rel="nofollow" href="http://www.thegeekstuff.com/vim-101-hacks-ebook/">Vim 101 Hacks eBook</a>
<br><br>
<a rel="nofollow" href="http://www.thegeekstuff.com/nagios-core-ebook/">Nagios Core 3 eBook</a></div>
		</div>	</div>
	<div style="clear:both;"></div>
</div>
		<p class="attribution">Copyright ¬© 2008‚Äì2017 Ramesh Natarajan. All rights reserved  | <a href="http://www.thegeekstuff.com/copyright">Terms of Service</a></p>
	</div>
</div><iframe id="google_osd_static_frame_5053639935218" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;"></iframe>
<script type="text/javascript" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/form.gzip"></script>
<script type="text/javascript" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/comment-reply.gzip"></script>
<script type="text/javascript">
(function(){
	var classes = document.getElementsByClassName('menu_control');
	for (i = 0; i < classes.length; i++) {
		classes[i].onclick = function() {
			var menu = this.nextElementSibling;
			if (/show_menu/.test(menu.className))
				menu.className = menu.className.replace('show_menu', '').trim();
			else
				menu.className += ' show_menu';
		};
	}
})();
</script>
<noscript><style type="text/css" scoped>.menu { display: block; }</style></noscript>
<script type="text/javascript" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/plusone.js" gapi_processed="true"></script>



<iframe name="oauth2relay289153830" id="oauth2relay289153830" src="How%20to%20Use%20C%20Mutex%20Lock%20Examples%20for%20Linux%20Thread%20Synchronization_files/postmessageRelay.html" style="width: 1px; height: 1px; position: absolute; top: -100px;" tabindex="-1" aria-hidden="true"></iframe><iframe id="rufous-sandbox" scrolling="no" allowtransparency="true" allowfullscreen="true" style="position: absolute; visibility: hidden; display: none; width: 0px; height: 0px; padding: 0px; border: medium none;" title="Twitter analytics iframe" frameborder="0"></iframe></body></html>
<!-- Performance optimized by W3 Total Cache. Learn more: http://www.w3-edge.com/wordpress-plugins/

Page Caching using disk: enhanced (Requested URI contains query)
Content Delivery Network via Amazon Web Services: CloudFront: static.thegeekstuff.com

 Served from: www.thegeekstuff.com @ 2017-11-04 22:33:17 by W3 Total Cache -->